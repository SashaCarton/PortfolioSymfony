{% extends 'base.html.twig' %}

{% block stylesheets %}
	<link rel="stylesheet" href="{{ asset('assets/styles/home.css') }}">
{% endblock %}

{% block javascripts_bottom %}
	<script src="https://cdn.tailwindcss.com"></script>
{% endblock %}

{% block title %}Sasha Carton
{% endblock %}

{% block body %}
	<div class="homePage">
		<div class="homePage__container">
			<h2 class="absolute right-0 text-7xl pt-20">DEVELOPPEUR WEB</h2>

			<div class="sashacarton border w-96">
				<div class="w-full border-b">
					<h3 class="p-8">Sasha Carton</h3>
					<p class="p-8">
						Étudiant en BTS SIO avec une spécialisation en développement web. Passionné par l’informatique, j’ai travaillé sur divers projets, acquérant des compétences front-end et back-end.
					</p>
					<div class="border-t p-8"></div>
				</div>
			</div>

			<!-- Zone pour afficher dynamiquement les projets -->
			<div
				id="project-list" class="grid grid-cols-1 gap-8 mt-12"><!-- Les projets de Supabase seront insérés ici -->
			</div>
		</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
	<script>
		// Initialisation de Supabase
const supabaseUrl = 'https://eentyfifrkmmputghxfy.supabase.co';
const supabaseKey = '{{ supabase_key|e }}'; // Echappement pour éviter XSS
const supabase = supabase.createClient(supabaseUrl, supabaseKey);

// Fonction pour charger les projets
async function fetchProjects() {
try {
const {data, error} = await supabase.from('projects').select('*').order('created_at', {ascending: false});

if (error) 
throw error;


const projectContainer = document.getElementById('project-list');
data.forEach(project => {
const projectElement = `
                    <div class="project border rounded-md p-4 shadow-lg">
                        <img src="${
project.image_url
}" alt="${
project.title
}" class="w-full h-48 object-cover rounded-t-md" />
                        <h3 class="text-xl font-bold mt-4">${
project.title
}</h3>
                        <p class="mt-2 text-gray-700">${
project.description
}</p>
                        <a href="${
project.link
}" target="_blank" class="text-blue-600 hover:underline mt-4 block">Voir le projet</a>
                    </div>
                `;
projectContainer.innerHTML += projectElement;
});
} catch (error) {
console.error('Erreur lors du chargement des projets:', error);
}
}

fetchProjects();
	</script>
{% endblock %}
